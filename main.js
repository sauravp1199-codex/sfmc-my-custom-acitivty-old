(()=>{var e={577:function(e,t){var n,o;o=this,n=function(){return function(e){var t,n,o,r=r||void 0,i=(e=e||window).Postmonger,a=e.addEventListener||e.attachEvent?e:window;return(t=void 0!==r?r:{}).noConflict=function(){return e.Postmonger=i,this},t.version="0.0.14",n=t.Connection=function(e){var t=(e="object"==typeof e?e:{}).connect||a.parent,n=e.from||"*",o=e.to||"*",r=this;return"string"==typeof t&&(t=document.getElementById(t)),t&&!t.postMessage&&t.jquery&&(t=t.get(0)),t&&!t.postMessage&&(t.contentWindow||t.contentDocument)&&(t=t.contentWindow||t.contentDocument),t&&t.postMessage?(r.connect=t,r.to=o,r.from=n,r):(a.console&&a.console.warn&&a.console.warn(" Warning: Postmonger could not establish connection with ",e.connect),!1)},o=t.Events=function(){var e=/\s+/,t=this;return t._callbacks={},t._has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t._keys=function(e){if(Object.keys)return Object.keys(e);if("object"!=typeof e)throw new TypeError("Invalid object");var n=[];for(var o in e)t._has(e,o)&&(n[n.length]=o);return n},t.on=function(n,o,r){var i,a,c,s,l;if(!o)return t;for(n=n.split(e),t._callbacks=t._callbacks||{},i=t._callbacks;a=n.shift();)s={},(c=(l=i[a])?l.tail:{}).next=s,c.context=r,c.callback=o,i[a]={tail:s,next:l?l.next:c};return t},t.off=function(n,o,r){var i,a,c,s,l,u=t._callbacks;if(u){if(!(n||o||r))return delete t._callbacks,t;for(n=n?n.split(e):t._keys(u);i=n.shift();)if(a=u[i],delete u[i],a&&(o||r))for(c=a.tail;(a=a.next)!==c;)s=a.callback,l=a.context,(o&&s)===o&&(r&&l)===r||t.on(i,s,l);return t}},t.trigger=function(n){var o,r,i,a,c,s,l;if(!(i=t._callbacks))return t;for(s=i.all,n=n.split(e),l=Array.prototype.slice.call(arguments,1);o=n.shift();){if(r=i[o])for(a=r.tail;(r=r.next)!==a;)r.callback.apply(r.context||t,l);if(r=s)for(a=r.tail,c=[o].concat(l);(r=r.next)!==a;)r.callback.apply(r.context||t,c)}return t},t},t.Session=function(){var t,r,i,c,s,l,u=arguments.length>0?Array.prototype.slice.call(arguments,0):[{}],f=[],g=new o,d=new o,m=this;for(m.on=g.on,m.off=g.off,m.trigger=d.trigger,m.end=function(){return g.off(),d.off(),a.removeEventListener?a.removeEventListener("message",l,!1):a.detachEvent&&a.detachEvent("onmessage",l),m},r=0,c=u.length;r<c;r++)if(t=new n(u[r])){for(i=0,s=f.length;i<s;i++)if(f[i].connect===t.connect&&f[i].from===t.from&&f[i].to===t.to){t=null;break}t&&f.push(t)}if(l=function(t){var n,o,r,i=null,a=[];for(o=0,r=f.length;o<r;o++)if(f[o].connect===t.source){i=f[o];break}if(!i)return!1;if("*"!==i.from&&i.from!==t.origin)return!1;try{if(!(n=JSON.parse(t.data)).e)return!1}catch(e){return!1}for(o in a.push(n.e),delete n.e,n)a.push(n[o]);g.trigger.apply(e,a)},a.addEventListener)a.addEventListener("message",l,!1);else{if(!a.attachEvent)return a.console&&a.console.warn&&a.console.warn("WARNING: Postmonger could not listen for messages on window %o",a),!1;a.attachEvent("onmessage",l)}return d.on("all",function(){var e,t,n=Array.prototype.slice.call(arguments,0),o={};for(o.e=n[0],e=1,t=n.length;e<t;e++)o["a"+e]=n[e];for(e=0,t=f.length;e<t;e++)f[e].connect.postMessage(JSON.stringify(o),f[e].to)}),m},t}(o)}.apply(t,[]),void 0===n||(e.exports=n)}},t={};const n=function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(577),o=new n.Session,r="localhost"===location.hostname||"127.0.0.1"===location.hostname;let i={};const a=[{id:"campaignName",label:"Campaign Name",required:!0},{id:"tiny",label:"Tiny",required:!0},{id:"PE_ID",label:"PE ID",required:!0},{id:"TEMPLATE_ID",label:"Template ID",required:!0},{id:"TELEMARKETER_ID",label:"Telemarketer ID",required:!0},{id:"message",label:"Message",required:!0}];function c(e){i=e||{},console.log(i);const t=i.arguments&&i.arguments.execute&&Array.isArray(i.arguments.execute.inArguments)&&i.arguments.execute.inArguments.length>0?i.arguments.execute.inArguments:[],n=Object.assign({},...t);a.forEach(({id:e})=>{Object.prototype.hasOwnProperty.call(n,e)&&(function(e,t){const n=document.getElementById(e);n&&("SELECT"===n.tagName?n.value=null!=t?String(t):n.value:n.value=null!=t?String(t):"")}(e,n[e]),l(e))}),i.metaData&&i.metaData.isConfigured||a.every(({id:e})=>{const t=n[e];return null!=t&&""!==String(t).trim()})&&(i.metaData=i.metaData||{},i.metaData.isConfigured=!0)}function s(e){return document.querySelector(`[data-field="${e}"]`)}function l(e){const t=s(e);if(!t)return;t.classList.remove("slds-has-error");const n=t.querySelector(".error-text");n&&(n.textContent="")}function u(e){return e?"SELECT"===e.tagName?e.value:"string"==typeof e.value?e.value.trim():e.value:""}function f(){const e={};let t=!1;a.forEach(({id:n,label:o,required:r})=>{const i=document.getElementById(n);if(!i)return;const a=u(i);if(r&&(null==a||""===a))return function(e,t){const n=s(e);if(!n)return;n.classList.add("slds-has-error");const o=n.querySelector(".error-text");o&&(o.textContent=t)}(n,`${o} is required.`),void(t=!0);e[n]=(i.tagName,a)}),t||(i.metaData=i.metaData||{},i.metaData.isConfigured=!0,i.arguments=i.arguments||{},i.arguments.execute=i.arguments.execute||{},i.arguments.execute.inArguments=[e],o.trigger("updateActivity",i),console.log(`Activity has been updated. Activity: ${JSON.stringify(i)}`))}document.addEventListener("DOMContentLoaded",function(){a.forEach(({id:e})=>{const t=document.getElementById(e);if(!t)return void console.warn(`Field with id "${e}" is missing from the DOM.`);const n="SELECT"===t.tagName?"change":"input";t.addEventListener(n,()=>{l(e),function(e){if(!e||!e.target)return;const t=u(e.target);t&&t.length>0&&o.trigger("setActivityDirtyState",!0)}({target:t})})}),r&&(console.log("DEV MODE ENABLED - TRIGGERING MOCK JB -> CUSTOM ACTIVITY SIGNAL"),function(){const e=new n.Session,t={};window.jb=t,e.on("setActivityDirtyState",function(e){console.log("[echo] setActivityDirtyState -> ",e)}),e.on("requestInspectorClose",function(){console.log("[echo] requestInspectorClose")}),e.on("updateActivity",function(e){console.log("[echo] updateActivity -> ",JSON.stringify(e,null,4))}),e.on("ready",function(){console.log("[echo] ready"),console.log("\tuse jb.ready() from the console to initialize your activity")}),t.save=()=>{f()},t.ready=()=>{e.trigger("initActivity",{name:"",key:"EXAMPLE-1",metaData:{},configurationArguments:{},arguments:{executionMode:"{{Context.ExecutionMode}}",definitionId:"{{Context.DefinitionId}}",activityId:"{{Activity.Id}}",contactKey:"{{Context.ContactKey}}",execute:{inArguments:[{campaignName:"Sample Campaign",tiny:"1",PE_ID:"12345",TEMPLATE_ID:"67890",TELEMARKETER_ID:"TM-001",message:"Sample SMS body"}],outArguments:[]},startActivityKey:"{{Context.StartActivityKey}}",definitionInstanceId:"{{Context.DefinitionInstanceId}}",requestObjectId:"{{Context.RequestObjectId}}"}})}}()),o.on("initActivity",c),o.on("clickedNext",f),o.trigger("ready"),console.log("Journey Builder has been signaled we may receive payload...")})})();
//# sourceMappingURL=main.js.map