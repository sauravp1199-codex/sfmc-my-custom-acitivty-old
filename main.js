(()=>{var t={577:function(t,e){var n,o;o=this,n=function(){return function(t){var e,n,o,r=r||void 0,i=(t=t||window).Postmonger,c=t.addEventListener||t.attachEvent?t:window;return(e=void 0!==r?r:{}).noConflict=function(){return t.Postmonger=i,this},e.version="0.0.14",n=e.Connection=function(t){var e=(t="object"==typeof t?t:{}).connect||c.parent,n=t.from||"*",o=t.to||"*",r=this;return"string"==typeof e&&(e=document.getElementById(e)),e&&!e.postMessage&&e.jquery&&(e=e.get(0)),e&&!e.postMessage&&(e.contentWindow||e.contentDocument)&&(e=e.contentWindow||e.contentDocument),e&&e.postMessage?(r.connect=e,r.to=o,r.from=n,r):(c.console&&c.console.warn&&c.console.warn(" Warning: Postmonger could not establish connection with ",t.connect),!1)},o=e.Events=function(){var t=/\s+/,e=this;return e._callbacks={},e._has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e._keys=function(t){if(Object.keys)return Object.keys(t);if("object"!=typeof t)throw new TypeError("Invalid object");var n=[];for(var o in t)e._has(t,o)&&(n[n.length]=o);return n},e.on=function(n,o,r){var i,c,a,s,l;if(!o)return e;for(n=n.split(t),e._callbacks=e._callbacks||{},i=e._callbacks;c=n.shift();)s={},(a=(l=i[c])?l.tail:{}).next=s,a.context=r,a.callback=o,i[c]={tail:s,next:l?l.next:a};return e},e.off=function(n,o,r){var i,c,a,s,l,u=e._callbacks;if(u){if(!(n||o||r))return delete e._callbacks,e;for(n=n?n.split(t):e._keys(u);i=n.shift();)if(c=u[i],delete u[i],c&&(o||r))for(a=c.tail;(c=c.next)!==a;)s=c.callback,l=c.context,(o&&s)===o&&(r&&l)===r||e.on(i,s,l);return e}},e.trigger=function(n){var o,r,i,c,a,s,l;if(!(i=e._callbacks))return e;for(s=i.all,n=n.split(t),l=Array.prototype.slice.call(arguments,1);o=n.shift();){if(r=i[o])for(c=r.tail;(r=r.next)!==c;)r.callback.apply(r.context||e,l);if(r=s)for(c=r.tail,a=[o].concat(l);(r=r.next)!==c;)r.callback.apply(r.context||e,a)}return e},e},e.Session=function(){var e,r,i,a,s,l,u=arguments.length>0?Array.prototype.slice.call(arguments,0):[{}],f=[],g=new o,m=new o,d=this;for(d.on=g.on,d.off=g.off,d.trigger=m.trigger,d.end=function(){return g.off(),m.off(),c.removeEventListener?c.removeEventListener("message",l,!1):c.detachEvent&&c.detachEvent("onmessage",l),d},r=0,a=u.length;r<a;r++)if(e=new n(u[r])){for(i=0,s=f.length;i<s;i++)if(f[i].connect===e.connect&&f[i].from===e.from&&f[i].to===e.to){e=null;break}e&&f.push(e)}if(l=function(e){var n,o,r,i=null,c=[];for(o=0,r=f.length;o<r;o++)if(f[o].connect===e.source){i=f[o];break}if(!i)return!1;if("*"!==i.from&&i.from!==e.origin)return!1;try{if(!(n=JSON.parse(e.data)).e)return!1}catch(t){return!1}for(o in c.push(n.e),delete n.e,n)c.push(n[o]);g.trigger.apply(t,c)},c.addEventListener)c.addEventListener("message",l,!1);else{if(!c.attachEvent)return c.console&&c.console.warn&&c.console.warn("WARNING: Postmonger could not listen for messages on window %o",c),!1;c.attachEvent("onmessage",l)}return m.on("all",function(){var t,e,n=Array.prototype.slice.call(arguments,0),o={};for(o.e=n[0],t=1,e=n.length;t<e;t++)o["a"+t]=n[t];for(t=0,e=f.length;t<e;t++)f[t].connect.postMessage(JSON.stringify(o),f[t].to)}),d},e}(o)}.apply(e,[]),void 0===n||(t.exports=n)}},e={};const n=function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(577),o=new n.Session,r="localhost"===location.hostname||"127.0.0.1"===location.hostname;let i={};function c(t){let e;i=t,console.log(i),e=i.arguments&&i.arguments.execute&&i.arguments.execute.inArguments&&i.arguments.execute.inArguments.length>0?i.arguments.execute.inArguments:[];const[n={}]=e;["message","firstNameAttribute","mobilePhoneAttribute"].forEach(t=>{void 0!==n[t]&&function(t,e){const n=document.getElementById(t);n&&(n.value=null==e?"":e)}(t,n[t])})}function a(){s()}function s(){const t=document.getElementById("message"),e=document.getElementById("firstNameAttribute"),n=document.getElementById("mobilePhoneAttribute"),r=t?t.value.trim():"",c=e?e.value.trim():"",a=n?n.value.trim():"",s=window.__activityForm||{};s.hideError&&s.hideError();const l=i||{},u=[{message:r||"Thank you for your purchase!",firstNameAttribute:c||"{{Contact.Attribute.KarixWPTest.FirstName}}",mobilePhoneAttribute:a||"{{Contact.Attribute.KarixWPTest.mobile}}"}];l.arguments=l.arguments||{};const f=l.arguments.execute||{};l.arguments.execute={...f,inArguments:u,timeout:Math.min(f.timeout||1e4,1e4)},l.metaData=l.metaData||{},l.metaData.isConfigured=!0,i=l,o.trigger("updateActivity",l),console.log(`Activity has been updated. Activity: ${JSON.stringify(l)}`)}function l(t){t.target.value.length>0&&o.trigger("setActivityDirtyState",!0)}document.addEventListener("DOMContentLoaded",function(){["message","firstNameAttribute","mobilePhoneAttribute"].forEach(t=>{const e=document.getElementById(t);e&&e.addEventListener("input",l)}),r&&(console.log("DEV MODE ENABLED - TRIGGERING MOCK JB -> CUSTOM ACTIVITY SIGNAL"),function(){const t=new n.Session,e={};window.jb=e,t.on("setActivityDirtyState",function(t){console.log("[echo] setActivityDirtyState -> ",t)}),t.on("requestInspectorClose",function(){console.log("[echo] requestInspectorClose")}),t.on("updateActivity",function(t){console.log("[echo] updateActivity -> ",JSON.stringify(t,null,4))}),t.on("ready",function(){console.log("[echo] ready"),console.log("\tuse jb.ready() from the console to initialize your activity")}),e.save=()=>{s()},e.ready=()=>{t.trigger("initActivity",{name:"",key:"EXAMPLE-1",metaData:{},configurationArguments:{},arguments:{executionMode:"{{Context.ExecutionMode}}",definitionId:"{{Context.DefinitionId}}",activityId:"{{Activity.Id}}",contactKey:"{{Context.ContactKey}}",execute:{inArguments:[],outArguments:[]},startActivityKey:"{{Context.StartActivityKey}}",definitionInstanceId:"{{Context.DefinitionInstanceId}}",requestObjectId:"{{Context.RequestObjectId}}"}})}}()),o.on("initActivity",c),o.on("clickedNext",s),o.on("save",a),o.trigger("ready"),console.log("Journey Builder has been signaled we may receive payload...")})})();