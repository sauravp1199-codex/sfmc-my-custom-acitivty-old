(()=>{var e={577:function(e,t){var n,o;o=this,n=function(){return function(e){var t,n,o,r=r||void 0,i=(e=e||window).Postmonger,c=e.addEventListener||e.attachEvent?e:window;return(t=void 0!==r?r:{}).noConflict=function(){return e.Postmonger=i,this},t.version="0.0.14",n=t.Connection=function(e){var t=(e="object"==typeof e?e:{}).connect||c.parent,n=e.from||"*",o=e.to||"*",r=this;return"string"==typeof t&&(t=document.getElementById(t)),t&&!t.postMessage&&t.jquery&&(t=t.get(0)),t&&!t.postMessage&&(t.contentWindow||t.contentDocument)&&(t=t.contentWindow||t.contentDocument),t&&t.postMessage?(r.connect=t,r.to=o,r.from=n,r):(c.console&&c.console.warn&&c.console.warn(" Warning: Postmonger could not establish connection with ",e.connect),!1)},o=t.Events=function(){var e=/\s+/,t=this;return t._callbacks={},t._has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t._keys=function(e){if(Object.keys)return Object.keys(e);if("object"!=typeof e)throw new TypeError("Invalid object");var n=[];for(var o in e)t._has(e,o)&&(n[n.length]=o);return n},t.on=function(n,o,r){var i,c,s,a,l;if(!o)return t;for(n=n.split(e),t._callbacks=t._callbacks||{},i=t._callbacks;c=n.shift();)a={},(s=(l=i[c])?l.tail:{}).next=a,s.context=r,s.callback=o,i[c]={tail:a,next:l?l.next:s};return t},t.off=function(n,o,r){var i,c,s,a,l,u=t._callbacks;if(u){if(!(n||o||r))return delete t._callbacks,t;for(n=n?n.split(e):t._keys(u);i=n.shift();)if(c=u[i],delete u[i],c&&(o||r))for(s=c.tail;(c=c.next)!==s;)a=c.callback,l=c.context,(o&&a)===o&&(r&&l)===r||t.on(i,a,l);return t}},t.trigger=function(n){var o,r,i,c,s,a,l;if(!(i=t._callbacks))return t;for(a=i.all,n=n.split(e),l=Array.prototype.slice.call(arguments,1);o=n.shift();){if(r=i[o])for(c=r.tail;(r=r.next)!==c;)r.callback.apply(r.context||t,l);if(r=a)for(c=r.tail,s=[o].concat(l);(r=r.next)!==c;)r.callback.apply(r.context||t,s)}return t},t},t.Session=function(){var t,r,i,s,a,l,u=arguments.length>0?Array.prototype.slice.call(arguments,0):[{}],f=[],g=new o,d=new o,m=this;for(m.on=g.on,m.off=g.off,m.trigger=d.trigger,m.end=function(){return g.off(),d.off(),c.removeEventListener?c.removeEventListener("message",l,!1):c.detachEvent&&c.detachEvent("onmessage",l),m},r=0,s=u.length;r<s;r++)if(t=new n(u[r])){for(i=0,a=f.length;i<a;i++)if(f[i].connect===t.connect&&f[i].from===t.from&&f[i].to===t.to){t=null;break}t&&f.push(t)}if(l=function(t){var n,o,r,i=null,c=[];for(o=0,r=f.length;o<r;o++)if(f[o].connect===t.source){i=f[o];break}if(!i)return!1;if("*"!==i.from&&i.from!==t.origin)return!1;try{if(!(n=JSON.parse(t.data)).e)return!1}catch(e){return!1}for(o in c.push(n.e),delete n.e,n)c.push(n[o]);g.trigger.apply(e,c)},c.addEventListener)c.addEventListener("message",l,!1);else{if(!c.attachEvent)return c.console&&c.console.warn&&c.console.warn("WARNING: Postmonger could not listen for messages on window %o",c),!1;c.attachEvent("onmessage",l)}return d.on("all",function(){var e,t,n=Array.prototype.slice.call(arguments,0),o={};for(o.e=n[0],e=1,t=n.length;e<t;e++)o["a"+e]=n[e];for(e=0,t=f.length;e<t;e++)f[e].connect.postMessage(JSON.stringify(o),f[e].to)}),m},t}(o)}.apply(t,[]),void 0===n||(e.exports=n)}},t={};const n=function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(577),o=new n.Session,r="localhost"===location.hostname||"127.0.0.1"===location.hostname;let i={};function c(e){let t;i=e,console.log(i),t=i.arguments&&i.arguments.execute&&i.arguments.execute.inArguments&&i.arguments.execute.inArguments.length>0?i.arguments.execute.inArguments:[];const[n={}]=t;["message","firstNameAttribute","mobilePhoneAttribute"].forEach(e=>{void 0!==n[e]&&function(e,t){const n=document.getElementById(e);n&&(n.value=null==t?"":t)}(e,n[e])})}function s(){const e=document.getElementById("message"),t=document.getElementById("firstNameAttribute"),n=document.getElementById("mobilePhoneAttribute"),r=e?e.value.trim():"",c=t?t.value:"",s=n?n.value.trim():"",a=window.__activityForm||{};r?s?(a.hideError&&a.hideError(),i.metaData.isConfigured=!0,i.arguments.execute.inArguments=[{message:r,firstNameAttribute:c,mobilePhoneAttribute:s}],o.trigger("updateActivity",i),console.log(`Activity has been updated. Activity: ${JSON.stringify(i)}`)):a.showError&&a.showError("Mobile Phone Attribute is required before the activity can be saved."):a.showError&&a.showError("Message is required before the activity can be saved.")}function a(e){e.target.value.length>0&&o.trigger("setActivityDirtyState",!0)}document.addEventListener("DOMContentLoaded",function(){["message","firstNameAttribute","mobilePhoneAttribute"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("input",a)}),r&&(console.log("DEV MODE ENABLED - TRIGGERING MOCK JB -> CUSTOM ACTIVITY SIGNAL"),function(){const e=new n.Session,t={};window.jb=t,e.on("setActivityDirtyState",function(e){console.log("[echo] setActivityDirtyState -> ",e)}),e.on("requestInspectorClose",function(){console.log("[echo] requestInspectorClose")}),e.on("updateActivity",function(e){console.log("[echo] updateActivity -> ",JSON.stringify(e,null,4))}),e.on("ready",function(){console.log("[echo] ready"),console.log("\tuse jb.ready() from the console to initialize your activity")}),t.save=()=>{s()},t.ready=()=>{e.trigger("initActivity",{name:"",key:"EXAMPLE-1",metaData:{},configurationArguments:{},arguments:{executionMode:"{{Context.ExecutionMode}}",definitionId:"{{Context.DefinitionId}}",activityId:"{{Activity.Id}}",contactKey:"{{Context.ContactKey}}",execute:{inArguments:[],outArguments:[]},startActivityKey:"{{Context.StartActivityKey}}",definitionInstanceId:"{{Context.DefinitionInstanceId}}",requestObjectId:"{{Context.RequestObjectId}}"}})}}()),o.on("initActivity",c),o.on("clickedNext",s),o.trigger("ready"),console.log("Journey Builder has been signaled we may receive payload...")})})();
//# sourceMappingURL=main.js.map